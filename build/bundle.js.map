{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/controller.js","src/js/main.js","src/js/model.js","src/js/router.js","src/js/service.js","src/js/template.js","src/js/util.js","src/js/view.js"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/* jshint esversion:6, devel: true */\n\nexport default class Controller {\n    \n    constructor(model, view) {\n        this.model = model;\n        this.view  = view;\n    }\n    \n    render(data) {\n        this.view.render(data);\n    }\n    \n    setView(hash) {\n        \n//        console.log('setView fired. Hash: ', hash);\n        \n        this.model.getGalleries()\n            .then( data => this.render(data) );\n        \n    }\n    \n}","/* jshint esversion:6, browser:true */\n\nimport Model      from './model';\nimport { $on }    from './util';\nimport View       from './view';\nimport Controller from './controller';\nimport Router     from './router';\n\nclass App {\n    \n    constructor() {\n        this.el = document.getElementById('router-target');\n        \n        const model = new Model();\n        const view  = new View();\n        \n        this.controller = new Controller(model, view);\n        this.router     = new Router();\n        \n    }\n    \n}\n\nconst app = new App();\n\n// event handler calls controller's 'setView' method with URI hash\nconst setView = () => {\n    app.controller.setView(document.location.hash);\n};\n\n// event handler calls router's 'route' method\nconst doRoute = () => {\n    app.router.route(app.el);\n};\n\n// define routes\napp.router.add_route('/',          'home',      setView);\napp.router.add_route('/about',     'about',     setView);\napp.router.add_route('/contact',   'contact',   setView);\napp.router.add_route('/portfolio', 'portfolio', setView);\n\n//console.log('routes from Main: ', app.router.routes);\n//console.log('element from Main: ', app.router.element);\n\n// register event listeners\n$on(window, 'load',       doRoute);\n$on(window, 'hashchange', doRoute);\n","/* jshint esversion:6, devel:true */\n\nimport { getJSON } from './service';\n\nexport default class Model {\n    \n    constructor() {\n    }\n    \n    /* fetch galleries\n    */\n    getGalleries() {\n        return getJSON('src/js/mock.json')\n            .then( galleries => galleries );\n    }\n    \n}","/* jshint esversion:6, browser:true, devel:true */\n\n/* ============================ utility methods ============================ */\n\nfunction parse_params(param_string) {\n    const input_params_arr = param_string.split('&');\n    const params = {};\n    let j = 0;\n    \n    input_params_arr.forEach( input_param => {\n        \n        // convert input param to array of key, value\n        const param = input_param.split('=');\n        \n        if (param.length === 2) {\n            \n            // if [key, value] then {key: value}\n            params[param[0]] = param[1];\n            \n        } else if (param.length === 1) {\n            \n            // else, {j: key}\n            params[j] = param[0];\n            j += 1;\n            \n        } else {\n            console.log('bad param - die!');\n        }\n        \n    });\n    \n    return params;\n}\n\n\n/* =========================== class definition ============================ */\n\nexport default class Router {\n    \n    constructor() {\n        this.routes = {};\n    }\n    \n    /* route registering function\n     *\n     * @param   [string]     path          [URL to route to]\n     * @param   [string]     template_id   [template for the route]\n     * @param   [function]   controller    [controller associated with route]\n    */\n    add_route(path, template_id, controller) {\n        this.routes[path] = {\n            template_id : template_id,\n            controller  : controller\n        };\n    }\n    \n    \n    /* router\n     *\n     * @param   [string]   url   [destination]\n    */\n    route(el) {\n        const hash_frag = location.hash.slice(1) || '/';\n        \n        // deal with query params\n        const route_pieces = hash_frag.split('?'),\n              base_route   = route_pieces[0],\n              route_split  = route_pieces.length,\n              params = (route_split > 1) ? parse_params(route_pieces[1]) : null;\n        \n        console.log('======= Router Diagnostics =======');\n        console.log('hash fragment : ', hash_frag);\n        console.log('route_pieces  : ', route_pieces);\n        console.log('route_split   : ', route_split);\n        console.log('params        : ', params);\n        \n              \n        // capture specific route object from 'routes'\n        let route = this.routes[base_route];\n        \n        if (el && route.controller) {\n            route.controller(params);\n            el.innerHTML = hash_frag;\n        }\n    }\n    \n}\n","/* jshint esversion:6, browser:true */\n\nconst getJSON = (url) => {\n    const xhr = new XMLHttpRequest();\n    return new Promise( (resolve, reject) => {\n        xhr.onreadystatechange = () => {\n            if (xhr.readyState === 4) {\n                if (xhr.status === 200) {\n                    resolve(JSON.parse(xhr.responseText));\n                } else {\n                    reject(xhr.responseText);\n                }\n            }\n        };\n        xhr.open('GET', url);\n        xhr.send();\n    });\n};\n\nexport { getJSON };\n","/* jshint esversion:6 */\n\n/* utility method for easy templating of repeating html elements\n *\n * @params  [array]  literalsArr   [array of all the literal secti\n * @params  [array]  ...cooked     [rest param: all the proccessed expressions]\n * @returns [string]               [the processed string]\n*/\nconst html = (literalsArr, ...cooked) => {\n    let result = '';\n    \n    cooked.forEach( (cook, indx) => {\n        let lit = literalsArr[indx];\n        if (Array.isArray(cook)) {\n            cook = cook.join('');\n        }\n        result += lit;\n        result += cook;\n    });\n    result += literalsArr[literalsArr.length - 1];\n    return result;\n};\n\n\n/* generate gallery link\n*/\nconst gallery_link = (gallery) => html`\n    <div class=\"gallery-link\">\n        <a href=\"${gallery.link_url}\">\n            <div class=\"gallery-link-img\" style=\"background-image: url(${gallery.img_url})\"></div>\n            <div class=\"gallery-link-title\">\n                ${gallery.title}\n            </div>\n        </a>\n    </div>\n`;\n\n\n/* generate grid list of galleries\n*/\nconst gallery_list = (galleries) => html`\n    <div class=\"gallery-list\">\n        ${galleries.map( gallery => gallery_link(gallery) )}\n    </div>\n`;\n\nexport { gallery_list };\n","/* jshint esversion:6, browser:true */\n\n/* register handler to an event emitted by a target */\nconst $on = (target, event, handler) => {\n    return target.addEventListener(event, handler);\n};\n\nexport { $on };\n","/* jshint esversion:6, browser: true */\n\nimport { gallery_list } from './template';\n\nexport default class View {\n    \n    constructor() {\n        this.target = document.getElementById('target');\n    }\n    \n    render(data) {\n        this.target.innerHTML = gallery_list(data);\n        \n    }\n    \n}\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvY29udHJvbGxlci5qcyIsInNyYy9qcy9tYWluLmpzIiwic3JjL2pzL21vZGVsLmpzIiwic3JjL2pzL3JvdXRlci5qcyIsInNyYy9qcy9zZXJ2aWNlLmpzIiwic3JjL2pzL3RlbXBsYXRlLmpzIiwic3JjL2pzL3V0aWwuanMiLCJzcmMvanMvdmlldy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7QUNBQTs7SUFFcUIsVTtBQUVqQix3QkFBWSxLQUFaLEVBQW1CLElBQW5CLEVBQXlCO0FBQUE7O0FBQ3JCLGFBQUssS0FBTCxHQUFhLEtBQWI7QUFDQSxhQUFLLElBQUwsR0FBYSxJQUFiO0FBQ0g7Ozs7K0JBRU0sSSxFQUFNO0FBQ1QsaUJBQUssSUFBTCxDQUFVLE1BQVYsQ0FBaUIsSUFBakI7QUFDSDs7O2dDQUVPLEksRUFBTTtBQUFBOztBQUVsQjs7QUFFUSxpQkFBSyxLQUFMLENBQVcsWUFBWCxHQUNLLElBREwsQ0FDVztBQUFBLHVCQUFRLE1BQUssTUFBTCxDQUFZLElBQVosQ0FBUjtBQUFBLGFBRFg7QUFHSDs7Ozs7O2tCQWxCZ0IsVTs7Ozs7QUNBckI7Ozs7QUFDQTs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7OzswSkFOQTs7SUFRTSxHLEdBRUYsZUFBYztBQUFBOztBQUNWLFNBQUssRUFBTCxHQUFVLFNBQVMsY0FBVCxDQUF3QixlQUF4QixDQUFWOztBQUVBLFFBQU0sUUFBUSxxQkFBZDtBQUNBLFFBQU0sT0FBUSxvQkFBZDs7QUFFQSxTQUFLLFVBQUwsR0FBa0IseUJBQWUsS0FBZixFQUFzQixJQUF0QixDQUFsQjtBQUNBLFNBQUssTUFBTCxHQUFrQixzQkFBbEI7QUFFSCxDOztBQUlMLElBQU0sTUFBTSxJQUFJLEdBQUosRUFBWjs7QUFFQTtBQUNBLElBQU0sVUFBVSxTQUFWLE9BQVUsR0FBTTtBQUNsQixRQUFJLFVBQUosQ0FBZSxP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QVUsWUFBWSxZQUFZLE1BQVosR0FBcUIsQ0FBakMsQ0FBVjtBQUNBLFdBQU8sTUFBUDtBQUNILENBYkQ7O0FBZ0JBOztBQUVBLElBQU0sZUFBZSxTQUFmLFlBQWUsQ0FBQyxPQUFEO0FBQUEsV0FBYSxJQUFiLGtCQUVGLFFBQVEsUUFGTixFQUdvRCxRQUFRLE9BSDVELEVBS0gsUUFBUSxLQUxMO0FBQUEsQ0FBckI7O0FBWUE7O0FBRUEsSUFBTSxlQUFlLFNBQWYsWUFBZSxDQUFDLFNBQUQ7QUFBQSxXQUFlLElBQWYsbUJBRVgsVUFBVSxHQUFWLENBQWU7QUFBQSxlQUFXLGFBQWEsT0FBYixDQUFYO0FBQUEsS0FBZixDQUZXO0FBQUEsQ0FBckI7O1FBTVMsWSxHQUFBLFk7Ozs7Ozs7O0FDOUNUOztBQUVBO0FBQ0EsSUFBTSxNQUFNLFNBQU4sR0FBTSxDQUFDLE1BQUQsRUFBUyxLQUFULEVBQWdCLE9BQWhCLEVBQTRCO0FBQ3BDLFdBQU8sT0FBTyxnQkFBUCxDQUF3QixLQUF4QixFQUErQixPQUEvQixDQUFQO0FBQ0gsQ0FGRDs7UUFJUyxHLEdBQUEsRzs7Ozs7Ozs7O3FqQkNQVDs7QUFFQTs7OztJQUVxQixJO0FBRWpCLG9CQUFjO0FBQUE7O0FBQ1YsYUFBSyxNQUFMLEdBQWMsU0FBUyxjQUFULENBQXdCLFFBQXhCLENBQWQ7QUFDSDs7OzsrQkFFTSxJLEVBQU07QUFDVCxpQkFBSyxNQUFMLENBQVksU0FBWixHQUF3Qiw0QkFBYSxJQUFiLENBQXhCO0FBRUg7Ozs7OztrQkFUZ0IsSSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIvKiBqc2hpbnQgZXN2ZXJzaW9uOjYsIGRldmVsOiB0cnVlICovXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbnRyb2xsZXIge1xuICAgIFxuICAgIGNvbnN0cnVjdG9yKG1vZGVsLCB2aWV3KSB7XG4gICAgICAgIHRoaXMubW9kZWwgPSBtb2RlbDtcbiAgICAgICAgdGhpcy52aWV3ICA9IHZpZXc7XG4gICAgfVxuICAgIFxuICAgIHJlbmRlcihkYXRhKSB7XG4gICAgICAgIHRoaXMudmlldy5yZW5kZXIoZGF0YSk7XG4gICAgfVxuICAgIFxuICAgIHNldFZpZXcoaGFzaCkge1xuICAgICAgICBcbi8vICAgICAgICBjb25zb2xlLmxvZygnc2V0VmlldyBmaXJlZC4gSGFzaDogJywgaGFzaCk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLm1vZGVsLmdldEdhbGxlcmllcygpXG4gICAgICAgICAgICAudGhlbiggZGF0YSA9PiB0aGlzLnJlbmRlcihkYXRhKSApO1xuICAgICAgICBcbiAgICB9XG4gICAgXG59IiwiLyoganNoaW50IGVzdmVyc2lvbjo2LCBicm93c2VyOnRydWUgKi9cblxuaW1wb3J0IE1vZGVsICAgICAgZnJvbSAnLi9tb2RlbCc7XG5pbXBvcnQgeyAkb24gfSAgICBmcm9tICcuL3V0aWwnO1xuaW1wb3J0IFZpZXcgICAgICAgZnJvbSAnLi92aWV3JztcbmltcG9ydCBDb250cm9sbGVyIGZyb20gJy4vY29udHJvbGxlcic7XG5pbXBvcnQgUm91dGVyICAgICBmcm9tICcuL3JvdXRlcic7XG5cbmNsYXNzIEFwcCB7XG4gICAgXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm91dGVyLXRhcmdldCcpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgbW9kZWwgPSBuZXcgTW9kZWwoKTtcbiAgICAgICAgY29uc3QgdmlldyAgPSBuZXcgVmlldygpO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5jb250cm9sbGVyID0gbmV3IENvbnRyb2xsZXIobW9kZWwsIHZpZXcpO1xuICAgICAgICB0aGlzLnJvdXRlciAgICAgPSBuZXcgUm91dGVyKCk7XG4gICAgICAgIFxuICAgIH1cbiAgICBcbn1cblxuY29uc3QgYXBwID0gbmV3IEFwcCgpO1xuXG4vLyBldmVudCBoYW5kbGVyIGNhbGxzIGNvbnRyb2xsZXIncyAnc2V0VmlldycgbWV0aG9kIHdpdGggVVJJIGhhc2hcbmNvbnN0IHNldFZpZXcgPSAoKSA9PiB7XG4gICAgYXBwLmNvbnRyb2xsZXIuc2V0Vmlldyhkb2N1bWVudC5sb2NhdGlvbi5oYXNoKTtcbn07XG5cbi8vIGV2ZW50IGhhbmRsZXIgY2FsbHMgcm91dGVyJ3MgJ3JvdXRlJyBtZXRob2RcbmNvbnN0IGRvUm91dGUgPSAoKSA9PiB7XG4gICAgYXBwLnJvdXRlci5yb3V0ZShhcHAuZWwpO1xufTtcblxuLy8gZGVmaW5lIHJvdXRlc1xuYXBwLnJvdXRlci5hZGRfcm91dGUoJy8nLCAgICAgICAgICAnaG9tZScsICAgICAgc2V0Vmlldyk7XG5hcHAucm91dGVyLmFkZF9yb3V0ZSgnL2Fib3V0JywgICAgICdhYm91dCcsICAgICBzZXRWaWV3KTtcbmFwcC5yb3V0ZXIuYWRkX3JvdXRlKCcvY29udGFjdCcsICAgJ2NvbnRhY3QnLCAgIHNldFZpZXcpO1xuYXBwLnJvdXRlci5hZGRfcm91dGUoJy9wb3J0Zm9saW8nLCAncG9ydGZvbGlvJywgc2V0Vmlldyk7XG5cbi8vY29uc29sZS5sb2coJ3JvdXRlcyBmcm9tIE1haW46ICcsIGFwcC5yb3V0ZXIucm91dGVzKTtcbi8vY29uc29sZS5sb2coJ2VsZW1lbnQgZnJvbSBNYWluOiAnLCBhcHAucm91dGVyLmVsZW1lbnQpO1xuXG4vLyByZWdpc3RlciBldmVudCBsaXN0ZW5lcnNcbiRvbih3aW5kb3csICdsb2FkJywgICAgICAgZG9Sb3V0ZSk7XG4kb24od2luZG93LCAnaGFzaGNoYW5nZScsIGRvUm91dGUpO1xuIiwiLyoganNoaW50IGVzdmVyc2lvbjo2LCBkZXZlbDp0cnVlICovXG5cbmltcG9ydCB7IGdldEpTT04gfSBmcm9tICcuL3NlcnZpY2UnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb2RlbCB7XG4gICAgXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgfVxuICAgIFxuICAgIC8qIGZldGNoIGdhbGxlcmllc1xuICAgICovXG4gICAgZ2V0R2FsbGVyaWVzKCkge1xuICAgICAgICByZXR1cm4gZ2V0SlNPTignc3JjL2pzL21vY2suanNvbicpXG4gICAgICAgICAgICAudGhlbiggZ2FsbGVyaWVzID0+IGdhbGxlcmllcyApO1xuICAgIH1cbiAgICBcbn0iLCIvKiBqc2hpbnQgZXN2ZXJzaW9uOjYsIGJyb3dzZXI6dHJ1ZSwgZGV2ZWw6dHJ1ZSAqL1xuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09IHV0aWxpdHkgbWV0aG9kcyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG5cbmZ1bmN0aW9uIHBhcnNlX3BhcmFtcyhwYXJhbV9zdHJpbmcpIHtcbiAgICBjb25zdCBpbnB1dF9wYXJhbXNfYXJyID0gcGFyYW1fc3RyaW5nLnNwbGl0KCcmJyk7XG4gICAgY29uc3QgcGFyYW1zID0ge307XG4gICAgbGV0IGogPSAwO1xuICAgIFxuICAgIGlucHV0X3BhcmFtc19hcnIuZm9yRWFjaCggaW5wdXRfcGFyYW0gPT4ge1xuICAgICAgICBcbiAgICAgICAgLy8gY29udmVydCBpbnB1dCBwYXJhbSB0byBhcnJheSBvZiBrZXksIHZhbHVlXG4gICAgICAgIGNvbnN0IHBhcmFtID0gaW5wdXRfcGFyYW0uc3BsaXQoJz0nKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChwYXJhbS5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gaWYgW2tleSwgdmFsdWVdIHRoZW4ge2tleTogdmFsdWV9XG4gICAgICAgICAgICBwYXJhbXNbcGFyYW1bMF1dID0gcGFyYW1bMV07XG4gICAgICAgICAgICBcbiAgICAgICAgfSBlbHNlIGlmIChwYXJhbS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gZWxzZSwge2o6IGtleX1cbiAgICAgICAgICAgIHBhcmFtc1tqXSA9IHBhcmFtWzBdO1xuICAgICAgICAgICAgaiArPSAxO1xuICAgICAgICAgICAgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnYmFkIHBhcmFtIC0gZGllIScpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiBwYXJhbXM7XG59XG5cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09IGNsYXNzIGRlZmluaXRpb24gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSb3V0ZXIge1xuICAgIFxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnJvdXRlcyA9IHt9O1xuICAgIH1cbiAgICBcbiAgICAvKiByb3V0ZSByZWdpc3RlcmluZyBmdW5jdGlvblxuICAgICAqXG4gICAgICogQHBhcmFtICAgW3N0cmluZ10gICAgIHBhdGggICAgICAgICAgW1VSTCB0byByb3V0ZSB0b11cbiAgICAgKiBAcGFyYW0gICBbc3RyaW5nXSAgICAgdGVtcGxhdGVfaWQgICBbdGVtcGxhdGUgZm9yIHRoZSByb3V0ZV1cbiAgICAgKiBAcGFyYW0gICBbZnVuY3Rpb25dICAgY29udHJvbGxlciAgICBbY29udHJvbGxlciBhc3NvY2lhdGVkIHdpdGggcm91dGVdXG4gICAgKi9cbiAgICBhZGRfcm91dGUocGF0aCwgdGVtcGxhdGVfaWQsIGNvbnRyb2xsZXIpIHtcbiAgICAgICAgdGhpcy5yb3V0ZXNbcGF0aF0gPSB7XG4gICAgICAgICAgICB0ZW1wbGF0ZV9pZCA6IHRlbXBsYXRlX2lkLFxuICAgICAgICAgICAgY29udHJvbGxlciAgOiBjb250cm9sbGVyXG4gICAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8qIHJvdXRlclxuICAgICAqXG4gICAgICogQHBhcmFtICAgW3N0cmluZ10gICB1cmwgICBbZGVzdGluYXRpb25dXG4gICAgKi9cbiAgICByb3V0ZShlbCkge1xuICAgICAgICBjb25zdCBoYXNoX2ZyYWcgPSBsb2NhdGlvbi5oYXNoLnNsaWNlKDEpIHx8ICcvJztcbiAgICAgICAgXG4gICAgICAgIC8vIGRlYWwgd2l0aCBxdWVyeSBwYXJhbXNcbiAgICAgICAgY29uc3Qgcm91dGVfcGllY2VzID0gaGFzaF9mcmFnLnNwbGl0KCc/JyksXG4gICAgICAgICAgICAgIGJhc2Vfcm91dGUgICA9IHJvdXRlX3BpZWNlc1swXSxcbiAgICAgICAgICAgICAgcm91dGVfc3BsaXQgID0gcm91dGVfcGllY2VzLmxlbmd0aCxcbiAgICAgICAgICAgICAgcGFyYW1zID0gKHJvdXRlX3NwbGl0ID4gMSkgPyBwYXJzZV9wYXJhbXMocm91dGVfcGllY2VzWzFdKSA6IG51bGw7XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZygnPT09PT09PSBSb3V0ZXIgRGlhZ25vc3RpY3MgPT09PT09PScpO1xuICAgICAgICBjb25zb2xlLmxvZygnaGFzaCBmcmFnbWVudCA6ICcsIGhhc2hfZnJhZyk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdyb3V0ZV9waWVjZXMgIDogJywgcm91dGVfcGllY2VzKTtcbiAgICAgICAgY29uc29sZS5sb2coJ3JvdXRlX3NwbGl0ICAgOiAnLCByb3V0ZV9zcGxpdCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdwYXJhbXMgICAgICAgIDogJywgcGFyYW1zKTtcbiAgICAgICAgXG4gICAgICAgICAgICAgIFxuICAgICAgICAvLyBjYXB0dXJlIHNwZWNpZmljIHJvdXRlIG9iamVjdCBmcm9tICdyb3V0ZXMnXG4gICAgICAgIGxldCByb3V0ZSA9IHRoaXMucm91dGVzW2Jhc2Vfcm91dGVdO1xuICAgICAgICBcbiAgICAgICAgaWYgKGVsICYmIHJvdXRlLmNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIHJvdXRlLmNvbnRyb2xsZXIocGFyYW1zKTtcbiAgICAgICAgICAgIGVsLmlubmVySFRNTCA9IGhhc2hfZnJhZztcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbn1cbiIsIi8qIGpzaGludCBlc3ZlcnNpb246NiwgYnJvd3Nlcjp0cnVlICovXG5cbmNvbnN0IGdldEpTT04gPSAodXJsKSA9PiB7XG4gICAgY29uc3QgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKCAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT09IDQpIHtcbiAgICAgICAgICAgICAgICBpZiAoeGhyLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHhoci5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgeGhyLm9wZW4oJ0dFVCcsIHVybCk7XG4gICAgICAgIHhoci5zZW5kKCk7XG4gICAgfSk7XG59O1xuXG5leHBvcnQgeyBnZXRKU09OIH07XG4iLCIvKiBqc2hpbnQgZXN2ZXJzaW9uOjYgKi9cblxuLyogdXRpbGl0eSBtZXRob2QgZm9yIGVhc3kgdGVtcGxhdGluZyBvZiByZXBlYXRpbmcgaHRtbCBlbGVtZW50c1xuICpcbiAqIEBwYXJhbXMgIFthcnJheV0gIGxpdGVyYWxzQXJyICAgW2FycmF5IG9mIGFsbCB0aGUgbGl0ZXJhbCBzZWN0aVxuICogQHBhcmFtcyAgW2FycmF5XSAgLi4uY29va2VkICAgICBbcmVzdCBwYXJhbTogYWxsIHRoZSBwcm9jY2Vzc2VkIGV4cHJlc3Npb25zXVxuICogQHJldHVybnMgW3N0cmluZ10gICAgICAgICAgICAgICBbdGhlIHByb2Nlc3NlZCBzdHJpbmddXG4qL1xuY29uc3QgaHRtbCA9IChsaXRlcmFsc0FyciwgLi4uY29va2VkKSA9PiB7XG4gICAgbGV0IHJlc3VsdCA9ICcnO1xuICAgIFxuICAgIGNvb2tlZC5mb3JFYWNoKCAoY29vaywgaW5keCkgPT4ge1xuICAgICAgICBsZXQgbGl0ID0gbGl0ZXJhbHNBcnJbaW5keF07XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGNvb2spKSB7XG4gICAgICAgICAgICBjb29rID0gY29vay5qb2luKCcnKTtcbiAgICAgICAgfVxuICAgICAgICByZXN1bHQgKz0gbGl0O1xuICAgICAgICByZXN1bHQgKz0gY29vaztcbiAgICB9KTtcbiAgICByZXN1bHQgKz0gbGl0ZXJhbHNBcnJbbGl0ZXJhbHNBcnIubGVuZ3RoIC0gMV07XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG5cblxuLyogZ2VuZXJhdGUgZ2FsbGVyeSBsaW5rXG4qL1xuY29uc3QgZ2FsbGVyeV9saW5rID0gKGdhbGxlcnkpID0+IGh0bWxgXG4gICAgPGRpdiBjbGFzcz1cImdhbGxlcnktbGlua1wiPlxuICAgICAgICA8YSBocmVmPVwiJHtnYWxsZXJ5LmxpbmtfdXJsfVwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImdhbGxlcnktbGluay1pbWdcIiBzdHlsZT1cImJhY2tncm91bmQtaW1hZ2U6IHVybCgke2dhbGxlcnkuaW1nX3VybH0pXCI+PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZ2FsbGVyeS1saW5rLXRpdGxlXCI+XG4gICAgICAgICAgICAgICAgJHtnYWxsZXJ5LnRpdGxlfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvYT5cbiAgICA8L2Rpdj5cbmA7XG5cblxuLyogZ2VuZXJhdGUgZ3JpZCBsaXN0IG9mIGdhbGxlcmllc1xuKi9cbmNvbnN0IGdhbGxlcnlfbGlzdCA9IChnYWxsZXJpZXMpID0+IGh0bWxgXG4gICAgPGRpdiBjbGFzcz1cImdhbGxlcnktbGlzdFwiPlxuICAgICAgICAke2dhbGxlcmllcy5tYXAoIGdhbGxlcnkgPT4gZ2FsbGVyeV9saW5rKGdhbGxlcnkpICl9XG4gICAgPC9kaXY+XG5gO1xuXG5leHBvcnQgeyBnYWxsZXJ5X2xpc3QgfTtcbiIsIi8qIGpzaGludCBlc3ZlcnNpb246NiwgYnJvd3Nlcjp0cnVlICovXG5cbi8qIHJlZ2lzdGVyIGhhbmRsZXIgdG8gYW4gZXZlbnQgZW1pdHRlZCBieSBhIHRhcmdldCAqL1xuY29uc3QgJG9uID0gKHRhcmdldCwgZXZlbnQsIGhhbmRsZXIpID0+IHtcbiAgICByZXR1cm4gdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGhhbmRsZXIpO1xufTtcblxuZXhwb3J0IHsgJG9uIH07XG4iLCIvKiBqc2hpbnQgZXN2ZXJzaW9uOjYsIGJyb3dzZXI6IHRydWUgKi9cblxuaW1wb3J0IHsgZ2FsbGVyeV9saXN0IH0gZnJvbSAnLi90ZW1wbGF0ZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZpZXcge1xuICAgIFxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnRhcmdldCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YXJnZXQnKTtcbiAgICB9XG4gICAgXG4gICAgcmVuZGVyKGRhdGEpIHtcbiAgICAgICAgdGhpcy50YXJnZXQuaW5uZXJIVE1MID0gZ2FsbGVyeV9saXN0KGRhdGEpO1xuICAgICAgICBcbiAgICB9XG4gICAgXG59XG4iXX0="}